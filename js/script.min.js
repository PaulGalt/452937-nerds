var body=document.body,openModal=document.querySelector(".modal-open-btn"),showModal=document.querySelector(".modal-contact-us"),closeModal=showModal.querySelector(".modal-close"),userName=showModal.querySelector("[name=name]"),userEmail=showModal.querySelector("[name=email]"),contactForm=showModal.querySelector("form"),userMessage=showModal.querySelector("[name=message]"),storageName,storageEmail,storageMessage;body.classList.contains("no-js")&&(body.classList.remove("no-js"),userName.removeAttribute("required"),userEmail.removeAttribute("required"),userMessage.removeAttribute("required"));try{storageName=localStorage.getItem("userName"),storageEmail=localStorage.getItem("userEmail"),storageMessage=localStorage.getItem("userMessage")}catch(e){console.log(e.message,e.name)}openModal.addEventListener("click",function(e){e.preventDefault(),showModal.classList.add("modal-open"),storageName||storageEmail?(userName.value=storageName,userEmail.value=storageEmail,userMessage.focus()):storageName?(userName.value=storageName,userEmail.focus()):userName.focus}),closeModal.addEventListener("click",function(e){e.preventDefault(),showModal.classList.remove("modal-open"),showModal.classList.remove("modal-error"),userName.classList.remove("modal-invalid"),userEmail.classList.remove("modal-invalid"),userMessage.classList.remove("modal-invalid")}),contactForm.addEventListener("submit",function(e){userName.value&&userEmail.value&&userMessage.value?(localStorage.setItem("userName",userName.value),localStorage.setItem("userEmail",userEmail.value)):(e.preventDefault(),showModal.classList.add("modal-error")),userName.value||(userName.setAttribute("placeholder","Заполните это поле"),userName.classList.add("modal-invalid")),userEmail.value||(userEmail.setAttribute("placeholder","Заполните это поле"),userEmail.classList.add("modal-invalid")),userMessage.value||(userMessage.setAttribute("placeholder","Заполните это поле"),userMessage.classList.add("modal-invalid"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&showModal.classList.contains("modal-open")&&(e.preventDefault(),showModal.classList.remove("modal-open"),showModal.classList.remove("modal-error"),userName.classList.remove("modal-invalid"),userEmail.classList.remove("modal-invalid"),userMessage.classList.remove("modal-invalid"))});